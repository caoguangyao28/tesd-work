<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>video 视频下载 ios</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>

    </style>
    <script src="./jquery/jquery-1.10.2.min.js"></script>
    <script>
        function downloadT() {
            // window.location.href = "https://ps4cnecommediapd.streaming.mediaservices.chinacloudapi.cn/66060b8e-175f-479e-9d52-b2a8286f0a1e/%E5%B0%8F%E7%A8%8B%E5%BA%8F0326%E5%AE%89%E5%88%A9%E7%BA%BD%E5%B4%94%E8%8E%B1%E8%83%B6%E5%8E%9F%E8%9B%8B%E7%99%BD10s_640x360_AACAudio_1130.mp4";
            var url = "https://ps4cnecommediapd.streaming.mediaservices.chinacloudapi.cn/66060b8e-175f-479e-9d52-b2a8286f0a1e/%E5%B0%8F%E7%A8%8B%E5%BA%8F0326%E5%AE%89%E5%88%A9%E7%BA%BD%E5%B4%94%E8%8E%B1%E8%83%B6%E5%8E%9F%E8%9B%8B%E7%99%BD10s_640x360_AACAudio_1130.mp4";
            // window.open(url);
            downloadUrlFile(url);
        }
        function downloadUrlFile(url) {
            url = url.replace(/\\/g, '/');
            const xhr = new XMLHttpRequest();
            xhr.open('GET', encodeURI(encodeURI(url)), true);
            xhr.responseType = 'blob';
            //xhr.setRequestHeader('Authorization', 'Basic a2VybWl0Omtlcm1pdA==');
            xhr.onload = () => {
                if (xhr.status === 200) {
                    // 获取文件blob数据并保存
                    var fileName = getFileName(url);
                    saveAs(xhr.response, fileName);
                }
            };

            xhr.send();
        }

        function saveAs(data, name) {
            var urlObject = window.URL || window.webkitURL || window;
            var export_blob = new Blob([data]);
            var save_link = document.createElementNS('http://www.w3.org/1999/xhtml', 'a')
            save_link.href = urlObject.createObjectURL(export_blob);
            save_link.download = name;
            save_link.click();
        }

        function getFileName(url) {
            var num = url.lastIndexOf('/') + 1
            var fileName = url.substring(num)
            //把参数和文件名分割开
            fileName = decodeURI(fileName.split("?")[0]);
            return fileName;
        }
    </script>
</head>
<body>
    <div id="videoContent2">
        <video id="videoContent" width="100%" controls="controls" x5-playsinline="x5-playsinline" webkit-playsinline="webkit-playsinline" playsinline="playsinline" src="./11.mp4">
        </video>
    </div>

    <button onclick="downloadT()">下载2</button>
<!-- 
    <div style="width: 50px;height: 40px;background-color: blue;position: absolute; top: 30px;z-index:1000;">
        11111
    </div> -->
    <!-- <a href="https://ps4cnecommediapd.streaming.mediaservices.chinacloudapi.cn/66060b8e-175f-479e-9d52-b2a8286f0a1e/%E5%B0%8F%E7%A8%8B%E5%BA%8F0326%E5%AE%89%E5%88%A9%E7%BA%BD%E5%B4%94%E8%8E%B1%E8%83%B6%E5%8E%9F%E8%9B%8B%E7%99%BD10s_640x360_AACAudio_1130.mp4"
        download>下载</a>
    <button onclick="downloadT()">下载2</button> -->
    <!-- <script>
            var startX,startY;
            
            $("#videoContent").on('touchstart',function(e){
                startX = e.originalEvent.changedTouches[0].pageX,
                startY = e.originalEvent.changedTouches[0].pageY;
            })

            $("#videoContent").on("touchend",function(e){
                const moveEndX = e.originalEvent.changedTouches[0].pageX;
                const moveEndY = e.originalEvent.changedTouches[0].pageY;
                const X = moveEndX - startX;
                const Y = moveEndY - startY;
                alert(X,Y);
            });

            $("#videoContent").on("touchmove",function(e){
                const moveEndX = e.originalEvent.changedTouches[0].pageX;
                const moveEndY = e.originalEvent.changedTouches[0].pageY;
                const X = moveEndX - startX;
                const Y = moveEndY - startY;
                alert('touchmove');
            });

            $("#videoContent2").on('touchstart',function(e){
                startX = e.originalEvent.changedTouches[0].pageX,
                startY = e.originalEvent.changedTouches[0].pageY;
            })

            $("#videoContent2").on("touchend",function(e){
                const moveEndX = e.originalEvent.changedTouches[0].pageX;
                const moveEndY = e.originalEvent.changedTouches[0].pageY;
                const X = moveEndX - startX;
                const Y = moveEndY - startY;
                alert('Y:'+Y);
            })

            $(window).on('touchstart',function(e){
                startX = e.originalEvent.changedTouches[0].pageX,
                startY = e.originalEvent.changedTouches[0].pageY;
            })

            $(window).on("touchend",function(e){
                const moveEndX = e.originalEvent.changedTouches[0].pageX;
                const moveEndY = e.originalEvent.changedTouches[0].pageY;
                const X = moveEndX - startX;
                const Y = moveEndY - startY;
                alert('body touch');
            })
    </script> -->
</body>
</html>